<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
       xmlns:tf="http://www.xteam.org/taskflow"
       xmlns:xcache="http://www.xteam.org/xcache"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.xteam.org/taskflow http://www.xteam.org/taskflow/tf-1.0.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
        http://www.xteam.org/xcache http://www.xteam.org/xcache/xcache-1.0.xsd">

    
    
    <bean id="initStatus" class="x.demo.station1.InitStatus"/>
    <bean id="oneStatus" class="x.demo.station1.StationOne"/>
    <bean id="twoStatus" class="x.demo.station1.StationTwo"/>
    <bean id="threeStatus" class="x.demo.station1.StationThree"/>
    <bean id="endStatus" class="x.demo.station1.EndStation"/>
    
    <tf:work id="testStatusBus" start="initStatusStop" record="true" finish="end" class="x.demo.StatusHolderBus"/>

    <tf:task id="initStatusStop" ref="initStatus" method="init">
        <tf:routing value="oneStop" to="oneStop"/>
        <tf:routing value="twoStop" to="twoStop"/>
        <tf:routing value="threeStop" to="threeStop"/>
    </tf:task>
    <tf:task id="oneStop" ref="oneStatus" method="doBusiness">
        <tf:routing value="twoStop" to="twoStop"/>
    </tf:task>
    <tf:task id="twoStop" ref="twoStatus" method="doBusiness">
        <tf:routing value="threeStop" to="threeStop"/>
    </tf:task>
    <tf:task id="threeStop" ref="threeStatus" method="doBusiness">
    </tf:task>
    <tf:task id="end" ref="endStatus" method="over">
    </tf:task>
    
    <bean id="localCache" class="xcache.bean.SingleMapCache"/>
	<xcache:config local="localCache"/>
	<xcache:autoproxy/>
</beans>